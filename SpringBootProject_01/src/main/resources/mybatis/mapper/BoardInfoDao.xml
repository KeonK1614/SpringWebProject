<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.springboot.dao.IBoardInfoDao">
	<select id="listDao" resultType="com.project.springboot.dto.BoardInfoDto">
		SELECT * 
		FROM board
		ORDER BY idx DESC
	</select>
	<select id="viewDao" resultType="com.project.springboot.dto.BoardInfoDto">
		SELECT * 
		FROM board 
		WHERE idx = #{idx}
	</select>
	<insert id="writeDao">
		INSERT INTO board (idx, id, title, content, ofile, sfile)
			VALUES (board_seq.nextval, #{id}, #{title}, #{content}, #{ofile, jdbcType=VARCHAR}, #{sfile, jdbcType=VARCHAR})
	</insert>
	<delete id="deleteDao">
	<!-- 결과 값이 없으므로 resultType 생략  -->
		DELETE FROM board WHERE idx = #{idx}
	</delete>
	<update id="editDao">
		UPDATE board 
		SET id = #{id}, title = #{title}, content = #{content}, ofile = #{ofile, jdbcType=VARCHAR}, sfile = #{sfile, jdbcType=VARCHAR}  
		WHERE idx = #{idx}
	</update>
	<update id="updateViewCount" >
		UPDATE board 
		SET viewCount=viewCount+1 
		WHERE idx = #{idx}
	</update>
	<update id="addLike">
		UPDATE board
		SET likeCount = likeCount + 1
		WHERE idx = #{idx}
	</update>
	<select id="pageCount" resultType="int">
		SELECT COUNT(*)
		FROM board
	</select>
	<select id="search" resultType="com.project.springboot.dto.BoardInfoDto">
		SELECT *
		FROM BOARD
		WHERE title LIKE CONCAT ('%', #{searchName} ,'%')
	</select>
</mapper>